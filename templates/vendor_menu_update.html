{% extends 'base.html' %}
{% block content %}
<h2>Menu & Availability – {{canteen.name}}</h2>
<form method="post" class="card">
  <h3>Add New Item</h3>
  <div class="row">
    <label>Name <input name="name" required></label>
    <label>Price <input name="price" type="number" min="1" step="0.5" required></label>
    <button type="submit">Add</button>
  </div>

  <h3>Existing Items</h3>
  <table class="table">
    <thead><tr><th>ID</th><th>Name</th><th>Price</th><th>Available</th></tr></thead>
    <tbody>
    {% for i in items %}
      <tr>
        <td>{{i.id}}</td><td>{{i.name}}</td><td>₹{{'%.2f'|format(i.price)}}</td>
        <td>
          <input type="checkbox" name="avail_{{i.id}}" {% if i.available %}checked{% endif %} onchange="this.form.submit()">
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</form>
{% endblock %}